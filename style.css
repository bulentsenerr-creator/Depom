/* v2026-01-13 PRO UI + multiselect + barcode modal + camera select + mobile PWA tweaks */
* { -webkit-tap-highlight-color: transparent; }
html, body { height: 100%; }
body { font-family: 'Segoe UI', system-ui, -apple-system, Roboto, 'Helvetica Neue', Arial, sans-serif; background: #f4f7f6; margin: 0; padding: 20px; }
.container { max-width: 1100px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
h1 { text-align: center; color: #2c3e50; margin: 0 0 15px; }
.form-section { display: flex; flex-direction: column; gap: 15px; margin-bottom: 25px; }
.search-bar { display: flex; gap: 10px; flex-wrap: wrap; }
input, select, textarea { padding: 10px; border: 1px solid #ddd; border-radius: 8px; width: 100%; box-sizing: border-box; font-family: inherit; }
textarea { resize: vertical; }
button { padding: 10px 16px; cursor: pointer; border-radius: 8px; border: none; background: #3498db; color: white; transition: 0.2s; }
button:hover { background: #2980b9; }
.manual-form { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; background: #f9f9f9; padding: 15px; border-radius: 10px; }
.manual-form textarea { grid-column: span 2; }
#cameraSelect { max-width: 260px; }
#coverUrl, #coverFile, .cover-clear-btn { grid-column: span 2; }
#coverFile { background: #fff; }
.save-btn { grid-column: span 2; background: #27ae60; }
.save-btn:hover { background: #1f8a4c; }
.cancel-btn { grid-column: span 2; background: #7f8c8d; }
.cancel-btn:hover { background: #707b7c; }
.cover-clear-btn { background: #8e44ad; }
.cover-clear-btn:hover { background: #7d3c98; }
.cover-preview { display: flex; gap: 12px; align-items: center; background: #fff7e6; border: 1px solid #ffe1a8; padding: 10px; border-radius: 10px; }
.cover-preview img { width: 84px; height: 126px; object-fit: cover; border-radius: 8px; border: 1px solid #f0d6a6; background: #fff; }
.cover-preview-title { font-weight: 600; color: #2c3e50; }
.cover-preview-msg { font-size: 13px; color: #7a5a1a; margin-top: 4px; }
.stats { color: #2c3e50; }
.library-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 18px; margin-top: 18px; }
.book-card { background: #fff; border: 1px solid #eee; padding: 12px; border-radius: 12px; text-align: left; display: flex; flex-direction: column; gap: 10px; }
.book-card.is-editing { border-color: #f1c40f; box-shadow: 0 6px 18px rgba(241,196,15,0.18); }
.card-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 10px; }
.card-title-wrap { display: flex; flex-direction: column; gap: 6px; min-width: 0; }
.book-title { margin: 0; font-size: 16px; color: #2c3e50; line-height: 1.25; word-break: break-word; }
.author-line { font-size: 13px; color: #7a7a7a; line-height: 1.25; }
.editing-badge { display: inline-flex; align-items: center; gap: 6px; font-size: 12px; padding: 4px 10px; border-radius: 999px; background: #fff3cd; color: #7a5a1a; border: 1px solid #ffeeba; width: fit-content; }
.editing-dot { width: 8px; height: 8px; border-radius: 50%; background: #f1c40f; }
.card-actions { display: flex; gap: 8px; flex-shrink: 0; }
.card-actions button { padding: 6px 10px; font-size: 12px; border-radius: 10px; }
.edit-btn { background: #f39c12; }
.edit-btn:hover { background: #d68910; }
.delete-btn { background: #e74c3c; }
.delete-btn:hover { background: #c0392b; }
.book-top { display: grid; grid-template-columns: 96px 1fr; gap: 10px; align-items: start; }
.book-card img { width: 96px; height: 144px; object-fit: cover; border-radius: 10px; border: 1px solid #f0f0f0; background: #fafafa; }
.cover-click { cursor: zoom-in; }
.book-meta { margin: 0; color: #555; font-size: 13px; line-height: 1.35; }
.badges { display: flex; flex-wrap: wrap; gap: 6px; }
.badge { font-size: 12px; padding: 4px 8px; border-radius: 999px; background: #eef6ff; color: #1f5f9b; }

/* Lightbox */
.lightbox { position: fixed; inset: 0; z-index: 9999; }
.lightbox-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.65); }
.lightbox-content { position: relative; margin: 40px auto; max-width: min(900px, calc(100vw - 32px)); max-height: calc(100vh - 80px); background: #111; border-radius: 14px; padding: 14px; display: flex; flex-direction: column; gap: 10px; }
.lightbox-content img { width: 100%; height: auto; max-height: calc(100vh - 170px); object-fit: contain; border-radius: 10px; background: #000; }
.lightbox-caption { color: #eaeaea; font-size: 13px; line-height: 1.3; }
.lightbox-close { position: absolute; top: 10px; right: 10px; padding: 8px 10px; background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.18); }
.lightbox-close:hover { background: rgba(255,255,255,0.18); }

/* Filtre/IO araç çubuğu */
.toolbar { display: flex; flex-direction: column; gap: 12px; margin: 14px 0; }
.filters-bar, .io-bar { display: flex; gap: 10px; flex-wrap: wrap; }
.filters-bar input, .filters-bar select { max-width: 220px; }
.io-bar button { background: #34495e; }
.io-bar button:hover { background: #2c3e50; }

/* Çoklu seçim listeleri */
.multiselect { min-width: 220px; max-width: 260px; height: auto; }

/* Barkod Modal */
.barcode-modal { position: fixed; inset: 0; z-index: 9998; }
.barcode-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.65); }
.barcode-box { position: relative; margin: 30px auto; max-width: min(780px, calc(100vw - 32px)); background: #111; color: #eaeaea; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.35); display: flex; flex-direction: column; }
.barcode-header { display: flex; justify-content: space-between; align-items: center; gap: 8px; padding: 10px 12px; border-bottom: 1px solid rgba(255,255,255,0.12); }
.barcode-close { background: rgba(255,255,255,0.12); }
.barcode-close:hover { background: rgba(255,255,255,0.18); }
.barcode-viewport { width: 100%; min-height: 340px; background: #000; display: grid; place-items: center; }
.barcode-footer { display: flex; justify-content: space-between; align-items: center; gap: 8px; padding: 10px 12px; border-top: 1px solid rgba(255,255,255,0.12); }
.barcode-stop { background: #e74c3c; }
.barcode-stop:hover { background: #c0392b; }
#barcodeHint { font-size: 13px; color: #bbb; }
.torch-btn { background: #f39c12; }
.torch-btn[disabled] { opacity: 0.6; cursor: not-allowed; }

/* Küçük ekranlar */
@media (max-width: 700px) {
  body { padding: 12px; }
  .manual-form { grid-template-columns: 1fr; }
  .manual-form textarea, .save-btn, .cancel-btn, #coverUrl, #coverFile, .cover-clear-btn { grid-column: auto; }
  .book-top { grid-template-columns: 88px 1fr; }
  .book-card img { width: 88px; height: 132px; }
  .card-header { flex-direction: column; }
  .card-actions { justify-content: flex-end; }
  .lightbox-content { margin: 18px auto; max-height: calc(100vh - 36px); }
  .filters-bar input, .filters-bar select { max-width: none; flex: 1 1 100%; }
  .multiselect { min-width: 100%; max-width: 100%; }
  #cameraSelect { max-width: 100%; }
  .barcode-box { margin: 10px auto; }
  .barcode-viewport { min-height: 280px; }
}
